cmake_minimum_required(VERSION 2.8)

project(Basic)

set(SAMPLES_ROOT ${CMAKE_SOURCE_DIR}/..) # CMAKE_SOURCE_DIR : indique où se trouve le dossier Sample.
include(${SAMPLES_ROOT}/Common/OrthancPlugins.cmake) # Inclusion du fichier OrthancPlugins.cmake contenant d 																											 #autres instructions
#include(${SAMPLES_ROOT}/Resources/CMake/JavaScriptLibraries.cmake) #Va chercher la lib JS.
include(CheckIncludeFiles)
include(CheckIncludeFileCXX)
include(CheckLibraryExists)
include(FindPythonInterp)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/Compiler.cmake)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/AutoGeneratedCode.cmake)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/DownloadPackage.cmake)

include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/BoostConfiguration.cmake)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/GoogleTestConfiguration.cmake)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/JsonCppConfiguration.cmake)
#include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/LibPngConfiguration.cmake)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/ZlibConfiguration.cmake)
include(${CMAKE_SOURCE_DIR}/Orthanc/Resources/CMake/SQLiteConfiguration.cmake)

#include(${CMAKE_SOURCE_DIR}/Resources/CMake/GdcmConfiguration.cmake)
#include(${CMAKE_SOURCE_DIR}/Resources/CMake/LibJpegConfiguration.cmake)
include(${CMAKE_SOURCE_DIR}/Resources/CMake/JavaScriptLibraries.cmake)

set(EMBEDDED_RESOURCES
    4VET  ${CMAKE_SOURCE_DIR}/WebApplication
    )

#Fonction appelant le fichier Orthanc_Explorer.js qui est notre bouton. 
EmbedResources(
  ORTHANC_EXPLORER  ${CMAKE_SOURCE_DIR}/Resources/OrthancExplorer.js
  JAVASCRIPT_LIBS   ${JAVASCRIPT_LIBS_DIR}
  ${EMBEDDED_RESOURCES}
  )

add_library(PluginTest SHARED Plugin.c) # Ajoute la librairie PLuginTest au Plugin.c, "SHARED libraries are linked dynamically and loaded at runtime" : http://www.cmake.org/cmake/help/v3.0/command/add_library.html?highlight=shared, cette fonction crée le fichier libPluginTest.so qu on utilise dans Configuration.json d Orthanc


